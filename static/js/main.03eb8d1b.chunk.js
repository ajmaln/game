(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],{13:function(t,i,e){},14:function(t,i,e){"use strict";e.r(i);var s=e(0),o=e.n(s),n=e(4),a=e.n(n),h=(e(13),e(1)),r=e(2),c=e(6),l=e(5),y=e(7),d=function(){function t(i){Object(h.a)(this,t),this.position=i.position,this.velocity=i.velocity,this.radius=i.size,this.lifeSpan=i.lifeSpan,this.inertia=.98}return Object(r.a)(t,[{key:"destroy",value:function(){this.delete=!0}},{key:"render",value:function(t){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x*=this.inertia,this.velocity.y*=this.inertia,this.radius-=.1,this.radius<.1&&(this.radius=.1),this.lifeSpan--<0&&this.destroy();var i=t.context;i.save(),i.translate(this.position.x,this.position.y),i.fillStyle="#ffffff",i.lineWidth=2,i.beginPath(),i.moveTo(0,-this.radius),i.arc(0,0,this.radius,0,2*Math.PI),i.closePath(),i.fill(),i.restore()}}]),t}();function u(t,i,e){return{x:(t.x-i.x)*Math.cos(e)-(t.y-i.y)*Math.sin(e)+i.x,y:(t.x-i.x)*Math.sin(e)+(t.y-i.y)*Math.cos(e)+i.y}}function p(t,i){return Math.random()*(i-t+1)+t}var v=function(){function t(i){Object(h.a)(this,t),this.position=i.position,this.velocity={x:0,y:0},this.rotation=0,this.rotationSpeed=3,this.speed=.01,this.inertia=.99,this.radius=20,this.lastShot=0,this.create=i.create,this.onDie=i.onDie}return Object(r.a)(t,[{key:"destroy",value:function(){this.delete=!0,this.onDie();for(var t=0;t<60;t++){var i=new d({lifeSpan:p(60,100),size:p(1,4),position:{x:this.position.x+p(-this.radius/4,this.radius/4),y:this.position.y+p(-this.radius/4,this.radius/4)},velocity:{x:p(-1.5,1.5),y:p(-1.5,1.5)}});this.create(i,"particles")}}},{key:"rotate",value:function(t){"LEFT"===t&&(this.rotation-=this.rotationSpeed),"RIGHT"===t&&(this.rotation+=this.rotationSpeed)}},{key:"accelerate",value:function(t){this.velocity.x-=Math.sin(-this.rotation*Math.PI/180)*this.speed,this.velocity.y-=Math.cos(-this.rotation*Math.PI/180)*this.speed;var i=u({x:0,y:-10},{x:0,y:0},(this.rotation-180)*Math.PI/180),e=new d({lifeSpan:p(20,40),size:p(1,3),position:{x:this.position.x+i.x+p(-2,2),y:this.position.y+i.y+p(-2,2)},velocity:{x:i.x/p(3,5),y:i.y/p(3,5)}});this.create(e,"particles")}},{key:"decelerate",value:function(){this.velocity.x+=Math.sin(-this.rotation*Math.PI/180)*this.speed,this.velocity.y+=Math.cos(-this.rotation*Math.PI/180)*this.speed;var t=u({x:0,y:-10},{x:0,y:0},(this.rotation-180)*Math.PI/180),i=new d({lifeSpan:p(20,40),size:p(1,3),position:{x:this.position.x+t.x+p(-2,2),y:this.position.y+t.y+p(-2,2)},velocity:{x:t.x/p(3,5),y:t.y/p(3,5)}});this.create(i,"particles")}},{key:"render",value:function(t){t.keys.up&&this.accelerate(1),t.keys.left&&this.rotate("LEFT"),t.keys.right&&this.rotate("RIGHT"),t.keys.down&&this.decelerate(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x*=this.inertia,this.velocity.y*=this.inertia,this.rotation>=360&&(this.rotation-=360),this.rotation<0&&(this.rotation+=360),this.position.x>t.screen.width?this.position.x=0:this.position.x<0&&(this.position.x=t.screen.width),this.position.y>t.screen.height?this.position.y=0:this.position.y<0&&(this.position.y=t.screen.height);var i=t.context;i.save(),i.translate(this.position.x,this.position.y),i.rotate(this.rotation*Math.PI/180),i.strokeStyle="#ffffff",i.fillStyle="#000000",i.lineWidth=2,i.beginPath(),i.moveTo(0,-15),i.lineTo(10,10),i.lineTo(5,7),i.lineTo(-5,7),i.lineTo(-10,10),i.closePath(),i.fill(),i.stroke(),i.restore()}}]),t}(),f=function(){function t(i){Object(h.a)(this,t),this.position=i.position,this.velocity={x:0,y:0},this.rotation=0,this.rotationSpeed=3,this.speed=.01,this.inertia=.99,this.radius=20,this.lastShot=0,this.create=i.create,this.onDie=i.onDie}return Object(r.a)(t,[{key:"destroy",value:function(){this.delete=!0,this.onDie();for(var t=0;t<60;t++){var i=new d({lifeSpan:p(60,100),size:p(1,4),position:{x:this.position.x+p(-this.radius/4,this.radius/4),y:this.position.y+p(-this.radius/4,this.radius/4)},velocity:{x:p(-1.5,1.5),y:p(-1.5,1.5)}});this.create(i,"particles")}}},{key:"rotate",value:function(t){"LEFT"===t&&(this.rotation-=this.rotationSpeed),"RIGHT"===t&&(this.rotation+=this.rotationSpeed)}},{key:"accelerate",value:function(t){this.velocity.x-=Math.sin(-this.rotation*Math.PI/180)*this.speed,this.velocity.y-=Math.cos(-this.rotation*Math.PI/180)*this.speed;var i=u({x:0,y:-10},{x:0,y:0},(this.rotation-180)*Math.PI/180),e=new d({lifeSpan:p(20,40),size:p(1,3),position:{x:this.position.x+i.x+p(-2,2),y:this.position.y+i.y+p(-2,2)},velocity:{x:i.x/p(3,5),y:i.y/p(3,5)}});this.create(e,"particles")}},{key:"decelerate",value:function(){this.velocity.x+=Math.sin(-this.rotation*Math.PI/180)*this.speed,this.velocity.y+=Math.cos(-this.rotation*Math.PI/180)*this.speed;var t=u({x:0,y:-10},{x:0,y:0},(this.rotation-180)*Math.PI/180),i=new d({lifeSpan:p(20,40),size:1,position:{x:this.position.x+t.x+p(-2,2),y:this.position.y+t.y+p(-2,2)},velocity:{x:t.x/p(3,5),y:t.y/p(3,5)}});this.create(i,"particles")}},{key:"render",value:function(t){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x*=this.inertia,this.velocity.y*=this.inertia,this.rotation>=360&&(this.rotation-=360),this.rotation<0&&(this.rotation+=360),this.position.x>t.screen.width?this.position.x=0:this.position.x<0&&(this.position.x=t.screen.width),this.position.y>t.screen.height?this.position.y=0:this.position.y<0&&(this.position.y=t.screen.height);var i=t.context;i.save(),i.translate(this.position.x,this.position.y),i.rotate(this.rotation*Math.PI/180),i.strokeStyle="#ffff00",i.fillStyle="#ffff00",i.lineWidth=3,i.beginPath(),i.moveTo(-5,10),i.lineTo(15,10),i.lineTo(-2,-2),i.lineTo(5,17),i.lineTo(10,-3),i.closePath(),i.fill(),i.stroke(),i.restore()}}]),t}(),x=37,k=39,w=38,S=40,m=65,b=68,g=87,M=83,O=32,P=function(t){function i(){var t;return Object(h.a)(this,i),(t=Object(c.a)(this,Object(l.a)(i).call(this))).state={screen:{width:window.innerWidth,height:window.innerHeight,ratio:window.devicePixelRatio||1},context:null,keys:{left:0,right:0,up:0,down:0,space:0},asteroidCount:3,currentScore:0,topScore:localStorage.topscore||0,inGame:!1},t.ship=[],t.asteroids=[],t.bullets=[],t.particles=[],t.stars=[],t}return Object(y.a)(i,t),Object(r.a)(i,[{key:"handleResize",value:function(t,i){this.setState({screen:{width:window.innerWidth,height:window.innerHeight,ratio:window.devicePixelRatio||1}})}},{key:"handleKeys",value:function(t,i){var e=this.state.keys;console.log(i.keyCode,t),i.keyCode!==x&&i.keyCode!==m||(e.left=t),i.keyCode!==k&&i.keyCode!==b||(e.right=t),i.keyCode!==w&&i.keyCode!==g||(e.up=t),i.keyCode===O&&(e.space=t),i.keyCode!==S&&i.keyCode!==M||(e.down=t),this.setState({keys:e})}},{key:"componentDidMount",value:function(){var t=this;window.addEventListener("keyup",this.handleKeys.bind(this,!1)),window.addEventListener("keydown",this.handleKeys.bind(this,!0)),window.addEventListener("resize",this.handleResize.bind(this,!1));var i=this.refs.canvas.getContext("2d");this.setState({context:i}),this.startGame(),requestAnimationFrame((function(){t.update()}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.handleKeys),window.removeEventListener("keydown",this.handleKeys),window.removeEventListener("resize",this.handleResize)}},{key:"update",value:function(){var t=this,i=this.state.context;this.state.keys,this.ship[0];if(i.save(),i.scale(this.state.screen.ratio,this.state.screen.ratio),i.fillStyle="#000",i.globalAlpha=.4,i.fillRect(0,0,this.state.screen.width,this.state.screen.height),i.globalAlpha=1,!this.asteroids.length){var e=this.state.asteroidCount+1;this.setState({asteroidCount:e}),this.generateAsteroids(e)}this.checkCollisionsWith(this.bullets,this.asteroids),this.checkCollisionsWith(this.ship,this.asteroids),this.checkCollisionsWith(this.ship,this.stars),this.updateObjects(this.particles,"particles"),this.updateObjects(this.asteroids,"asteroids"),this.updateObjects(this.bullets,"bullets"),this.updateObjects(this.ship,"ship"),this.updateObjects(this.stars,"stars"),i.restore(),requestAnimationFrame((function(){t.update()}))}},{key:"addScore",value:function(t){this.state.inGame&&this.setState({currentScore:this.state.currentScore+t})}},{key:"startGame",value:function(){this.setState({inGame:!0,currentScore:0});var t=new v({position:{x:this.state.screen.width/2,y:this.state.screen.height/2},create:this.createObject.bind(this),onDie:this.gameOver.bind(this)});this.createObject(t,"ship");var i=new f({position:{x:this.state.screen.width-100,y:this.state.screen.height/2},create:this.createObject.bind(this),onDie:this.gameOver.bind(this)});this.createObject(i,"stars"),this.asteroids=[]}},{key:"gameOver",value:function(){this.setState({inGame:!1}),this.state.currentScore>this.state.topScore&&(this.setState({topScore:this.state.currentScore}),localStorage.topscore=this.state.currentScore)}},{key:"generateAsteroids",value:function(t){this.ship[0]}},{key:"createObject",value:function(t,i){this[i].push(t)}},{key:"updateObjects",value:function(t,i){var e=0,s=!0,o=!1,n=void 0;try{for(var a,h=t[Symbol.iterator]();!(s=(a=h.next()).done);s=!0){a.value.delete?this[i].splice(e,1):t[e].render(this.state),e++}}catch(r){o=!0,n=r}finally{try{s||null==h.return||h.return()}finally{if(o)throw n}}}},{key:"checkCollisionsWith",value:function(t,i){for(var e,s=t.length-1;s>-1;--s)for(e=i.length-1;e>-1;--e){var o=t[s],n=i[e];this.checkCollision(o,n)&&(o.destroy(),n.destroy())}}},{key:"checkCollision",value:function(t,i){var e=t.position.x-i.position.x,s=t.position.y-i.position.y;return Math.sqrt(e*e+s*s)<t.radius+i.radius}},{key:"render",value:function(){var t,i;return i=this.state.currentScore<=0?"0 points... So sad.":this.state.currentScore>=this.state.topScore?"Top score with "+this.state.currentScore+" points. Woo!":this.state.currentScore+" Points though :)",this.state.inGame||(t=o.a.createElement("div",{className:"endgame"},o.a.createElement("p",null,"Game over, man!"),o.a.createElement("p",null,i),o.a.createElement("button",{onClick:this.startGame.bind(this)},"try again?"))),o.a.createElement("div",null,t,o.a.createElement("canvas",{ref:"canvas",width:this.state.screen.width*this.state.screen.ratio,height:this.state.screen.height*this.state.screen.ratio}))}}]),i}(s.Component);var j=function(){return o.a.createElement(P,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},8:function(t,i,e){t.exports=e(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.03eb8d1b.chunk.js.map